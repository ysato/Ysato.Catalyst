# Ysato.Catalyst

Laravelプロジェクトのセットアップを効率化するためのコマンドパッケージです。  
このパッケージは、プロジェクトのアーキテクチャ、メタデータ、開発標準を簡単に設定するためのコマンドを提供します。

## インストール

以下のコマンドを実行してインストールしてください。

```shell
composer require --dev ysato/catalyst
```

## 使用方法

インストール後、以下のコマンドを使用してセットアップを開始できます。

```shell
php artisan catalyst:setup
```

## コマンド一覧

以下は、READMEで使用するためのコマンド名と説明の日本語訳です。

---

## コマンド一覧

| コマンド名                       | 説明                                        |
|:----------------------------|:------------------------------------------|
| `catalyst:setup`            | プロジェクト全体のセットアップを実行します。                    |
| `catalyst:metadata`         | `composer.json` のメタデータを生成します。             |
| `catalyst:architecture-src` | 推奨される `src` ディレクトリの構成を初期化します。             |
| `catalyst:phpcs`            | PHP Code Sniffer の設定を初期化します。              |
| `catalyst:phpmd`            | PHP Mess Detector の設定を初期化します。             |
| `catalyst:spectral`         | Spectral (OpenAPI リンター) の設定を初期化します。       |
| `catalyst:github`           | 推奨される GitHub Actions ワークフローとルールセットを設定します。 |
| `catalyst:ide`              | 推奨される IDE (例: PhpStorm) の設定を初期化します。       |
| `catalyst:act`              | GitHub Actions のローカル実行を設定します。             |

## ブランチ保護ルールセットのインポート

このプロジェクトには、あらかじめ定義されたGitHubブランチ保護ルールセットがJSONファイルとして含まれています。これらをGitHubリポジトリにインポートすることで、一貫したブランチ保護ルールを迅速に適用できます。

`.github/` ディレクトリには以下のルールセットファイルがあります：

* `branch-all-users-rules.json`: 一般的にすべてのユーザーに適用されるルールが含まれています。
* `branch-exclude-core-contributors-rule.json`: コアコントリビューターを特定の制限から除外したり、彼らに特有のルールを適用したりするルールが含まれています。

### 前提条件

* ルールセットをインポートしたいGitHubリポジトリへの**管理者アクセス権限**が必要です。

### GitHub UI経由でのインポート (推奨)

GitHubでは、ルールセット設定を直接インポートできます。

1.  GitHub上で対象のリポジトリに移動します。
2.  **Settings (設定)** をクリックします。
3.  左側のサイドバーの「Code and automation (コードと自動化)」セクションにある **Rules (ルール)** をクリックし、次に **Rulesets (ルールセット)** をクリックします。
4.  **"Import ruleset" (ルールセットをインポート)** ボタンをクリックします。(このオプションは、UIの更新によって「...」メニューの下にあるか、直接表示されている場合があります。)
5.  JSONファイルのアップロードを求められます。
6.  `.github/branch-all-users-rules.json` をアップロードします。
7.  インポートされた設定を確認し、**"Create" (作成)** をクリックします。
8.  `.github/branch-exclude-core-contributors-rule.json` についても、手順4～7を繰り返します。

    **注意点：** インポート後、各ルールセットの「Target branches (対象ブランチ)」セクションを注意深く確認し、意図したブランチ（例： `main`, `develop`, `feature/*`）に適用されていることを確認してください。リポジトリのブランチ戦略に基づいて、これらを調整する必要がある場合があります。

### インポートの確認

インポート後、GitHubリポジトリの **Settings > Rules > Rulesets** (設定 > ルール > ルールセット) に移動し、新しいルールセットが表示され、期待通りに設定されていることを確認してください。適用ステータスや対象ブランチも確認しましょう。

## 貢献者向け

以下のコマンドは、依存ライブラリの最も古い互換バージョンをインストールし、  
本パッケージが多様な環境で安定して動作することを確認するために使用します。

```shell
composer update --prefer-lowest
```

## 貢献方法

1. このリポジトリをフォークします。
2. 新しいブランチを作成します。
3. 必要な変更を加え、コミットします。
4. プルリクエストを送信してください。

## ライセンス

このパッケージは、MITライセンスの下で提供されています。
